# simple_shelf_salt_bug

This repo contains configs for MOM6 to run a simple triangular ice shelf. It shows how the ISOMIP salinity initialization has a bug that isn't creating 
linear salinity will cell depth -- see `Seamount TS.ipynb` in `main` branch for images.

In this branch, the bug is eliminated by initializing with a thickness file. This thickness file is generated by first running the model (first section at the bottom of the `MOM_override`) and then creating a thickness file in `make_thickness.ipynb`. Then the model is run again, but instructed to skip the step `calc_sfc_displacement` in `MOM_state_initialization.F90` which would otherwise add the effect of the ice shelf onto the layers again. The result of this, somehow, is to eliminate the salt anomalies and also reduce the velocities (see plots in `make_thickness.ipynb`).
